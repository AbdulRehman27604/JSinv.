<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeddah Steel Interface</title>

  <style>
    body {
      background-color: #2b2b2b;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    header {
      text-align: right;
      font-weight: bold;
      font-size: 20px;
      color: #f1e60d;
      margin-bottom: 20px;
    }

    h2 {
      color: white;
      margin-bottom: 10px;
    }

    .form-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .section {
      background-color: #333;
      padding: 15px;
      border-radius: 6px;
      min-width: 280px;
      flex: 1;
    }

    label {
      display: inline-block;
      width: 100px;
      margin-bottom: 5px;
      font-weight: bold;
    }

    input[type="text"], textarea, select {
      background-color: #1c1c1c;
      border: none;
      color: white;
      padding: 6px 8px;
      width: 100%;
      max-width: 180px;
      border-radius: 3px;
    }

    textarea {
      resize: none;
      width: 100%;
      border-radius: 4px;
    }

    button {
      width: 100%;
      max-width: 120px;
      padding: 10px;
      border: none;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      background-color: white;
      color: red;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #1e1e1e;
      border-radius: 6px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: left;
      color: white;
      font-size: 14px;
    }

    th {
      background-color: #444;
      color: #f1e60d;
    }

    tr:nth-child(even) {
      background-color: #2e2e2e;
    }

    /* ðŸ”¥ LIMIT TABLE HEIGHT + SCROLL */
    .table-container {
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #444;
      border-radius: 6px;
    }

    .table-container::-webkit-scrollbar {
      width: 8px;
    }

    .table-container::-webkit-scrollbar-thumb {
      background-color: #555;
      border-radius: 4px;
    }

    .table-container::-webkit-scrollbar-thumb:hover {
      background-color: #777;
    }
  </style>
</head>

<body>

<a href="{{ url_for('search_jobs') }}" style="color: yellow;">Search Cutting</a>

<header>Jeddah Steel Pvt Ltd</header>

<h2>Cutting Job:</h2>

<form id="cuttingForm" method="POST" action="/submit">
  <div class="form-container">

    <div class="section">
      <label>Job Number:</label>
      <input type="text" id="JobNumber" name="JobNumber"><br>

      <label>Supplier Code:</label>
      <input type="text" id="SupplierCode" name="SupplierCode"><br>

      <label>Broker Code:</label>
      <input type="text" id="BrokerCode" name="BrokerCode"><br><br>

      <label>Supplier Name:</label><br>
      <select id="supplier" name="supplier">
        <option disabled selected>Select Supplier</option>
        <option value="AISHA STEEL LTD">AISHA STEEL LTD</option>
        <option value="GUL DEEWAN">GUL DEEWAN</option>
        <option value="CHINA">CHINA</option>
      </select><br><br>

      <label>Comments:</label><br>
      <textarea id="Comments" name="Comments" rows="3"></textarea>
    </div>

    <div class="section">
      <label>Width:</label>
      <input type="text" id="Width" name="Width" required><br>

      <label>Weight:</label>
      <input type="text" id="Weight" name="Weight" required><br>

      <label>Order No:</label>
      <input type="text" id="Order" name="Order" required><br><br>

      <label>Utilize:</label>
      <input type="text" id="Utilize" name="Utilize" required><br>

      <label>T.pipe:</label>
      <input type="text" id="Tpipe" name="Tpipe" required><br>

      <label>DC No:</label>
      <input type="text" id="DC" name="DC" required><br>

      <label>Wastage:</label>
      <input type="text" id="Wastage" name="Wastage" required><br><br>
    </div>

    <div class="section" style="max-width:200px;">
      <label>Coil Type:</label>
      <select id="coil" name="coil">
        <option disabled selected>Select Coil Type</option>
        <option value="CRC">CRC</option>
        <option value="HRC">HRC</option>
        <option value="GI">GI</option>
      </select>
    </div>

    <div class="section" style="max-width:200px;">
      <button type="submit">Submit</button><br><br>
      <button type="reset">Clear</button>
    </div>

  </div>
</form>

<h2>Submitted Records</h2>

<div class="table-container">
<table>
  <thead>
    <tr>
      <th>Date & Time</th>
      <th>Job No</th>
      <th>Supplier Code</th>
      <th>Broker Code</th>
      <th>Supplier Name</th>
      <th>Width</th>
      <th>Weight</th>
      <th>Order No</th>
      <th>Utilize</th>
      <th>T.pipe</th>
      <th>DC No</th>
      <th>Wastage</th>
      <th>Coil Type</th>
      <th>Comments</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>

 <tbody>
  {% for r in records %}
  <tr>
      <td>{{ r.date_time }}</td>
      <td>{{ r.job_num }}</td>
      <td>{{ r.supp_code }}</td>
      <td>{{ r.broker_code }}</td>
      <td>{{ r.supplier_name }}</td>
      <td>{{ r.width }}</td>
      <td>{{ r.weight }}</td>
      <td>{{ r.order_num }}</td>
      <td>{{ r.utilize }}</td>
      <td>{{ r.tpipe }}</td>
      <td>{{ r.dc_num }}</td>
      <td>{{ r.wastage }}</td>
      <td>{{ r.coil_type }}</td>
      <td>{{ r.comments }}</td>

      <!-- EDIT BUTTON -->
      <td>
        <a href="{{ url_for('edit_record', date_time=r.date_time) }}"
           style="color: yellow; font-weight: bold;">Edit</a>
      </td>

      <!-- DELETE BUTTON -->
      <td>
        <a href="{{ url_for('delete_record', date_time=r.date_time) }}"
           style="color: red; font-weight: bold;"
           onclick="return confirm('Are you sure you want to delete this record?');">
           Delete
        </a>
      </td>

  </tr>
  {% endfor %}
</tbody>

</table>
</div>

</body>
</html>
